doctype html
html
  head
    meta(charset="utf-8")
    meta(http-equiv="Content-Type" content="text/html; charset=utf-8")    
    title= title
    link(rel="shortcut icon" type="image" href="/images/logo.jpg")    
    link(rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css")
    link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous")
    link(rel='stylesheet', href='/stylesheets/normalize.min.css')
    link(rel='stylesheet', href='/stylesheets/animate.min.css')
    link(rel='stylesheet', href='/stylesheets/font-awesome.min.css')
    link(rel='stylesheet', href='/stylesheets/style.css')


  body    
    block content        
      div#header-wrapper
        div#header.container-fluid
          div#logo                   
            a(href="/")
              img(src="/images/logo.jpg" alt="logo" style="border-radius:50%" width="100px")                                              
              span Pimp_de_Ride

          div#menu
            ul
              li.active
                a(href="/" accesskey="1" title="") Home
              li
                a(href="/about") About Us       

              if user
                if user.admin==true
                  li
                    a(href="/shop/form" accesskey="2" title="") Post Prod             
                        
              li
                a#cartbadge(href="#cartmodal" accesskey="4" title="")
                  i.fa(style="font-size:24px") &#xf07a;                  
                  if cart               
                    span#cartCount=cart.Cart.length
                  else  
                    span#cartCount 0

              if user
                li
                  a(href="/users/profile" accesskey="5" title="") Profile                  
                li
                  a(href="/users/logout" accesskey="5" title="") Sign Out  
              else
                li
                  a(href="/users/signin" accesskey="5" title="Sign In") Sign In                

        if successes
          div.notification                                                 
            for success in successes
                div.alert.alert-success #{ success }
        if errors
          div.notification                                                 
            for error, i in errors
                div.alert.alert-danger #{ error }

        div#banner-wrapper
          div#banner.container
            div.row
              div.col
                div.title
                  h1.ml12 Welcome to Pimp_de_Ride                                    
                  span.byline Access customised car parts just by the click of a button.
                ul.actions
                  li                                
                    a(href="#products").button
                      i.fas.fa-cart-arrow-down                             
              div.col
                div.title.services                
                  h2 Services
                  p.ml14(style="color: #FFE3EA") 
                    span.text-wrapper
                      span.letters Pimping a car.
                      span.line
                  p.ml14(style="color: #FFE3EA") 
                    span.text-wrapper
                      span.letters Car Repair.
                      span.line                    
                  p.ml14(style="color: #FFE3EA") 
                    span.text-wrapper
                      span.letters System Diagnosing.
                      span.line                                  
                            
      div#products          
        h1.text-center Products                                
        div.container
          div.row
            if products
              for prod in products                              
                div.col
                  div.page-inner
                    div.row
                      div.el-wrapper
                        div.box-up
                          img.img(src='/uploads/products/'+prod.image width="50%" alt="product")                                                   
                          div.img-info
                            div.info-inner
                              span.p-name=prod.name
                              span.p-category=prod.Category.name
                            
                            div.a-descri Description : 
                              span.descri=prod.description

                        div.box-down
                          div.h-bg
                            div.h-bg-inner                  

                          a.cart(href="/shop/cartform/"+prod.id)
                            span.price="KSH "+prod.price
                              span=" "
                              i.fas.fa-cart-plus
                            span.add-to-cart
                              span.txt Add to Cart                                                                      
                  br            
                  

      div#cartmodal            
        div#btn-close-modal.close-cartmodal
          i.fas.fa-times-circle
          p Exit            
          h1 Cart    
        div.modal-content(style="background:transparent")                    
          div.container
              if cart
                if cart.total>0
                  h6.text-center(style="color:white")="Total: ksh "+cart.total
                  a.text-center.btn.btn-warning(href="/shop/ordersummary", style="margin:auto;display:block;") Proceed to CheckOut                                                   
                  div.wrap
                    for item in cart.Cart                             
                      div.box
                        h5.card-header
                          b=item.Product.name
                        div.card-body                                                      
                          img(src="/uploads/products/"+item.Product.image width="70px")
                          p="Price: @ ksh "+item.Product.price                        
                          p="Quantity: "+item.quantity                        
                          a(href="/shop/remove/from/cart/"+item.Product.id)
                            i.fas.fa-times-circle Remove
                else
                  div.alert.alert-danger.text-center You have not added anything in your cart. Please shop!                             

              else
                div.alert.alert-danger.text-center You have not added anything in your cart. Please shop!                             

      div#copyright.container-fluid     
        p.icons
          a(href="https://www.instagram.com/?hl=en")
            i.fab.fa-instagram
          a(href="https://twitter.com/login?lang=en")
            i.fab.fa-twitter
          a(href="https://www.facebook.com/")
            i.fab.fa-facebook
          a(href="mailto: peter_mirithu@yahoo.com")
            i.far.fa-envelope
        p &copy; 2020. All rights reserved. | Designed by
          a(href="https://github.com/petermirithu") Peter Mirithu | Software Developer

    script(src="/javascripts/jquery.min.js")        
    script(src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js")
    script(src="https://kit.fontawesome.com/8311960bd4.js" crossorigin="anonymous")
    script(src="/javascripts/animatedModal.min.js")
    script(src="/javascripts/scripts.js")
    script.
      // Wrap every letter in a span
      var textWrapper = document.querySelector('.ml14 .letters');
      textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

      anime.timeline({loop: true})
        .add({
          targets: '.ml14 .line',
          scaleX: [0,1],
          opacity: [0.5,1],
          easing: "easeInOutExpo",
          duration: 900
        }).add({
          targets: '.ml14 .letter',
          opacity: [0,1],
          translateX: [40,0],
          translateZ: 0,
          scaleX: [0.3, 1],
          easing: "easeOutExpo",
          duration: 800,
          offset: '-=600',
          delay: (el, i) => 150 + 25 * i
        }).add({
          targets: '.ml14',
          opacity: 0,
          duration: 1500,
          easing: "easeOutExpo",
          delay: 1500
        }); 

        //- services        
        var textWrapper = document.querySelector('.ml12');
        textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

        anime.timeline({loop: true})
          .add({
            targets: '.ml12 .letter',
            translateX: [40,0],
            translateZ: 0,
            opacity: [0,1],
            easing: "easeOutExpo",
            duration: 1200,
            delay: (el, i) => 500 + 30 * i
          }).add({
            targets: '.ml12 .letter',
            translateX: [0,-30],
            opacity: [1,0],
            easing: "easeInExpo",
            duration: 1100,
            delay: (el, i) => 100 + 30 * i
          });